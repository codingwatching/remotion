---
image: /generated/articles-docs-whisper-wasm-can-use-whisper-wasm.png
title: canUseWhisperWasm()
crumb: '@remotion/whisper-wasm'
---

:::warning
**Unstable API**: This package is experimental for the moment. As we test it, we might make a few changes to the API.  
:::

# canUseWhisperWasm()

Checks if the current browser environment supports running `@remotion/whisper-wasm` with a specified model. This function verifies various browser capabilities like `crossOriginIsolated`, `IndexedDB`, `navigator.storage.estimate()`, and available storage space.

## Example usage

```tsx twoslash
import {canUseWhisperWasm, type WhisperWasmModel} from '@remotion/whisper-wasm';
import {useState, useEffect} from 'react';

export default function MyComponent() {
  const [supported, setSupported] = useState<boolean | null>(null);
  const [reason, setReason] = useState<string | undefined>(undefined);

  useEffect(() => {
    const checkSupport = async () => {
      const modelToUse: WhisperWasmModel = 'tiny.en'; // Or any other model
      const result = await canUseWhisperWasm(modelToUse);
      setSupported(result.supported);
      if (!result.supported) {
        setReason(result.detailedReason ?? result.reason);
      }
    };

    checkSupport();
  }, []);

  if (supported === null) {
    return <p>Checking Whisper WASM support...</p>;
  }

  if (supported) {
    return <p>Whisper WASM is supported!</p>;
  }

  return <p>Whisper WASM is not supported: {reason}</p>;
}
```

## Arguments

### `model`

The Whisper model intended to be used. This is used to check if there's enough storage space for the model.
Possible values: `tiny`, `tiny.en`, `base`, `base.en`, `small`, `small.en`.

Refer to the `WhisperWasmModel` type exported by the package for a comprehensive list.

## Return value

A `Promise` that resolves to a `CanUseWhisperWasmResult` object with the following properties:

### `supported`

A boolean indicating whether Whisper WASM can be used. `true` if supported, `false` otherwise.

### `reason?`

If `supported` is `false`, this field provides a brief, categorized reason for the lack of support.

Possible values values include:

- `window-undefined`: `window` object is not available.
- `not-cross-origin-isolated`: The page is not cross-origin isolated.
- `indexed-db-unavailable`: IndexedDB is not available.
- `navigator-storage-unavailable`: `navigator.storage.estimate()` API is not available.
- `quota-undefined`: Storage quota could not be determined.
- `usage-undefined`: Storage usage could not be determined.
- `not-enough-space`: Insufficient storage space for the specified model.
- `error-estimating-storage`: An error occurred while trying to estimate storage.

### `detailedReason?`

If `supported` is `false`, this field may contain a more detailed, human-readable explanation of why Whisper WASM is not supported.

## Important considerations

- **Cross-Origin Isolation:** For `SharedArrayBuffer` to work, which is required by `@remotion/whisper-wasm`, the page must be served with specific HTTP headers:

  - `Cross-Origin-Opener-Policy: same-origin`
  - `Cross-Origin-Embedder-Policy: require-corp`
    Ensure your server is configured to send these headers. See [MDN documentation on `crossOriginIsolated`](https://developer.mozilla.org/en-US/docs/Web/API/Window/crossOriginIsolated) for more details.

- **Browser Compatibility:** While this function checks for necessary APIs, always test on your target browsers as support for WebAssembly, IndexedDB, and storage estimation can vary.

## See also

- [Source code for `canUseWhisperWasm()`](https://github.com/remotion-dev/remotion/blob/main/packages/whisper-wasm/src/can-use-whisper-wasm.ts)
- [`@remotion/whisper-wasm`](/docs/whisper-wasm)
- [`transcribe()`](/docs/whisper-wasm/transcribe)
- [`downloadWhisperModel()`](/docs/whisper-wasm/download-whisper-model)
